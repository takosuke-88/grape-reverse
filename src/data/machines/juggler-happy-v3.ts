import type { MachineConfig } from "../../types/machine-schema";

// ユーザー提供のマスターデータに基づく正確な確率設定
// 最終更新: 2026-02-19
export const happyV3Config: MachineConfig = {
  id: "happyv3",
  name: "ハッピージャグラーVⅢ",
  type: "A-type",
  themeColor: "bg-yellow-400",
  sections: [
    {
      id: "basic-data",
      title: "基本データ",
      elements: [
        {
          id: "total-games",
          label: "総ゲーム数",
          type: "counter",
          context: {},
          settingValues: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 },
          isDiscriminationFactor: false,
          discriminationWeight: 0,
        },
      ],
    },
    {
      id: "bonus-section",
      title: "ボーナス回数",
      elements: [
        {
          id: "big-count",
          label: "BIG回数",
          type: "counter",
          unit: "回",
          settingValues: {
            1: 273.1,
            2: 270.8,
            3: 263.2,
            4: 254.0,
            5: 239.2,
            6: 226.0,
          },
          isDiscriminationFactor: true,
          discriminationWeight: 0.35,
          isReadOnly: true,
        },
        {
          id: "reg-count",
          label: "REG回数",
          type: "counter",
          unit: "回",
          settingValues: {
            1: 397.2,
            2: 362.1,
            3: 332.7,
            4: 300.6,
            5: 273.1,
            6: 256.0,
          },
          isDiscriminationFactor: true,
          discriminationWeight: 1.2,
          isReadOnly: true,
        },
      ],
    },
    {
      id: "bonus-breakdown-section",
      title: "ボーナス詳細内訳",
      elements: [
        {
          id: "big-solo-count",
          label: "単独BIG",
          type: "counter",
          unit: "回",
          settingValues: {
            1: 436.9,
            2: 431.2,
            3: 412.2,
            4: 414.8,
            5: 376.6,
            6: 344.9,
          },
          isDiscriminationFactor: false,
          visibility: "detail",
        },
        {
          id: "big-cherry-count",
          label: "チェリーBIG",
          type: "counter",
          unit: "回",
          settingValues: {
            1: 1489.5,
            2: 1489.5,
            3: 1489.5,
            4: 1213.6,
            5: 1213.6,
            6: 1213.6,
          },
          isDiscriminationFactor: false,
          visibility: "detail",
        },
        {
          id: "big-unknown-count",
          label: "契機不明BIG",
          type: "counter",
          unit: "回",
          settingValues: {},
          isDiscriminationFactor: false,
          visibility: "detail",
        },
        {
          id: "reg-solo-count",
          label: "単独REG",
          type: "counter",
          unit: "回",
          settingValues: {
            1: 636.3,
            2: 569.9,
            3: 532.8,
            4: 478.4,
            5: 436.9,
            6: 425.6,
          },
          isDiscriminationFactor: true,
          visibility: "detail",
        },
        {
          id: "reg-cherry-count",
          label: "チェリーREG",
          type: "counter",
          settingValues: {
            1: 1057.0,
            2: 993.0,
            3: 885.6,
            4: 809.1,
            5: 728.2,
            6: 642.5,
          },
          isDiscriminationFactor: true,
          discriminationWeight: 0.8,
          conflictsWith: ["reg-count"],
          visibility: "detail",
        },
        {
          id: "reg-unknown-count",
          label: "契機不明REG",
          type: "counter",
          unit: "回",
          settingValues: {},
          isDiscriminationFactor: false,
          visibility: "detail",
        },
      ],
    },
    {
      id: "other-section",
      title: "その他",
      elements: [
        {
          id: "diff-coins",
          label: "差枚数",
          type: "counter",
          visibility: "grape-calc",
          context: {},
          settingValues: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 },
          isDiscriminationFactor: false,
          discriminationWeight: 0,
        },
      ],
    },
    {
      id: "normal-role-section",
      title: "通常時小役",
      elements: [
        {
          id: "grape-count",
          label: "ブドウ",
          type: "counter",
          context: {},
          settingValues: {
            1: 6.05,
            2: 6.01,
            3: 5.98,
            4: 5.83,
            5: 5.81,
            6: 5.79,
          },
          isDiscriminationFactor: true,
          discriminationWeight: 1.5,
        },
      ],
    },
  ],
  specs: {
    baseGamesPerMedal: 40,
    payoutRatio: [97.0, 98.1, 99.9, 102.9, 105.8, 108.4],
    payouts: {
      big: 240,
      reg: 96,
      grape: 8,
    },
    judgmentWeights: {
      grapeWeightMap: { 0: 0.1, 2000: 0.2, 4000: 0.5, 6000: 0.8, 8000: 1.0 },
      regBaseWeight: 1.2,
      bigBaseWeight: 0.35,
    },
    reverseCalcProbDenominators: {
      replay: 7.3,
      cherry: 56.5,
    },
  },
  detailedProbabilities: {
    big_solo: [436.9, 431.2, 412.2, 414.8, 376.6, 344.9],
    big_cherry: [1489.5, 1489.5, 1489.5, 1213.6, 1213.6, 1213.6],
    reg_solo: [636.3, 569.9, 532.8, 478.4, 436.9, 425.6],
    reg_cherry: [1057.0, 993.0, 885.6, 809.1, 728.2, 642.5],
  },
};
